<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Last in First Out CSS Transitions - Call Me Nick</title>
  <meta name="description" content="In this tutorial, we explore a CSS transition trick that I love that implements a last in, first out transition sequence.">
  <meta property="og:url" content="https://callmenick.com/dev/last-in-first-out-css-transitions/">
  <meta property="og:title" content="Last in First Out CSS Transitions - Call Me Nick">
  <meta property="og:description" content="In this tutorial, we explore a CSS transition trick that I love that implements a last in, first out transition sequence.">
  <meta property="og:image" content="https://callmenick.com/last-in-first-out-css-transitions-featured.png">
  <meta name="msapplication-config" content="https://callmenick.com/img/icons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" href="https://callmenick.com/css/style.css">
  <link rel="apple-touch-icon" sizes="180x180" href="https://callmenick.com/img/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://callmenick.com/img/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://callmenick.com/img/icons/favicon-16x16.png">
  <link rel="manifest" href="https://callmenick.com/img/icons/manifest.json">
  <link rel="mask-icon" href="https://callmenick.com/img/icons/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="https://callmenick.com/img/icons/favicon.ico">
  <link rel="canonical" href="https://callmenick.com/dev/last-in-first-out-css-transitions/">
</head>
<body>
  <div class="Wrapper">
    <div class="Sidebar">
  <header class="Header">
    <div class="Header-logo">
      <a href="https://callmenick.com/">
        <svg class="Logo" width="60" height="60" viewBox="0 0 60 60">
  <circle fill="#2196F3" cx="30" cy="30" r="30"/>
  <path fill="#FFF" d="M34.757 43.244A5.981 5.981 0 0 0 39.002 45 5.999 5.999 0 0 0 45 39.002c0-1.665-.67-3.154-1.757-4.243L25.244 16.757A6.002 6.002 0 0 0 15 20.999c0 1.663.67 3.155 1.757 4.241l18 18.004zM27.001 39.002A6 6 0 0 1 20.997 45C17.688 45 15 42.316 15 39.002a6.001 6.001 0 0 1 12.001 0zM45 20.999a6 6 0 0 1-12 0A6.002 6.002 0 0 1 39.002 15 6.002 6.002 0 0 1 45 20.999z"/>
</svg>

      </a>
    </div>
  </header>
  <nav class="Nav">
    <ul class="Nav-items">
      
      
        <li class="Nav-item ">
          <a href="https://callmenick.com/" class="Nav-link">Home</a>
        </li>
      
        <li class="Nav-item ">
          <a href="https://callmenick.com/dev" class="Nav-link">Dev</a>
        </li>
      
        <li class="Nav-item ">
          <a href="https://callmenick.com/contact" class="Nav-link">Contact</a>
        </li>
      
    </ul>
  </nav>
  <div id="carbonad" class="CarbonAd"></div>
</div>

    <main class="Main">
      <div class="Main-inner">
        
  <section class="Article">
    <div class="Article-header">
      <h1 class="Article-title">Last in First Out CSS Transitions</h1>
      <div class="Article-meta">
        <a href="https://callmenick.com/dev/last-in-first-out-css-transitions/" class="Article-meta-item">
          On: <em>2016/01/20</em>
        </a>
        <a href="/dev" class="Article-meta-item">
          In: <em>dev</em>
        </a>
      </div>
      <p class="Article-excerpt">In this tutorial, we explore a CSS transition trick that I love that implements a last in, first out transition sequence.</p>
      <div class="Article-featuredImg">
        <img src="last-in-first-out-css-transitions-featured.png" alt="Last in First Out CSS Transitions">
      </div>
    </div>
    <div class="Article-content">
      <div class="Content">
        

<div class="ButtonGroup ButtonGroup--gutter-md ButtonGroup--align-center">
  <a href="https://codepen.io/callmenick/pen/VMNOpq" class="Button Button--display-inlineBlock Button--appearance-secondary Button--size-sm">
    Get Source
  </a>
  <a href="https://codepen.io/callmenick/full/VMNOpq/" class="Button Button--display-inlineBlock Button--appearance-secondary Button--size-sm">
    View Demo
  </a>
</div>

<h2 id="introduction">Introduction</h2>

<p>In modern websites and applications, interactions and UX play a huge part in consumer retention. CSS animations have paved the way for us as far as enhancing user experiences goes, but it can be taken a step further with a little thought. In this tutorial, we&rsquo;re going to build what I like to call a &ldquo;last in, first out&rdquo; item animation, or a &ldquo;stack&rdquo; animation. What this means is that when some sort of toggle action is hit, items animate into view in a sequence. When the toggle action is hit again, the items animate out of view in a reverse sequential order (in relation to the animation in). I&rsquo;ll demonstrate it with some basic divs, but the application of this trick is what matters.</p>

<h2 id="a-visual-representation">A Visual Representation</h2>

<p>To understand more clearly what we&rsquo;re trying to achieve, let&rsquo;s step through the process with some images. At a neutral, or base state, all of our divs - let&rsquo;s call them bars - are occupying a small amount of fixed space. Here&rsquo;s a representation:</p>

<p><img src="last-in-first-out-css-transitions-step-0.png" alt="Step 0" /></p>

<p>Imagine now that we&rsquo;ve hit a toggle button of sorts, and we want all the bars to expand sequentially to 100% width.  Here&rsquo;s a visualization of that in action:</p>

<p><img src="last-in-first-out-css-transitions-step-1.png" alt="Step 1" /></p>

<p>When all bars have finished transitioning, they should occupy the full width of their container:</p>

<p><img src="last-in-first-out-css-transitions-step-2.png" alt="Step 2" /></p>

<p>At this point, hitting the toggle again should transition the bars back out, but in a reverse sequential order. That is, the last bar to transition in should be the first bar to transition out. Here&rsquo;s a visual representation:</p>

<p><img src="last-in-first-out-css-transitions-step-3.png" alt="Step 3" /></p>

<p>Finally, when this transition ends, all bars should return to their original state, as represented by the first image:</p>

<p><img src="last-in-first-out-css-transitions-step-4.png" alt="Step 4" /></p>

<h2 id="setting-up-the-demo">Setting Up The Demo</h2>

<p>Let&rsquo;s get a simple set up going on for our demonstration. The markup is fairly simple, with a containing element (<code>c-bars</code>) and 5 child elements (<code>c-bars__bar</code>). We&rsquo;ll also have a toggle button that will toggle an <code>is-expanded</code> class on all bars. Here&rsquo;s the HTML:</p>

<pre><code class="language-html">&lt;button class=&quot;c-btn&quot;&gt;Toggle&lt;/button&gt;

&lt;div class=&quot;c-bars&quot;&gt;
  &lt;span class=&quot;c-bars__bar&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;c-bars__bar&quot;&gt;2&lt;/span&gt;
  &lt;span class=&quot;c-bars__bar&quot;&gt;3&lt;/span&gt;
  &lt;span class=&quot;c-bars__bar&quot;&gt;4&lt;/span&gt;
  &lt;span class=&quot;c-bars__bar&quot;&gt;5&lt;/span&gt;
&lt;/div&gt;
</code></pre>

<p>The JavaScript to toggle the class is really straightforward as well:</p>

<pre><code class="language-javascript">&lt;script&gt;
  var btn = document.querySelector('.c-btn');
  var bars = document.querySelectorAll('.c-bars__bar');

  btn.addEventListener('click', function() {
    for (var i = 0; i &lt; bars.length; i++) {
      bars[i].classList.toggle('is-expanded');
    }
  });
&lt;/script&gt;
</code></pre>

<p>In a real world application, your script may look much different. The point here is that hitting some sort of toggle switch toggles the <code>is-expanded</code> class to all elements in question.</p>

<h2 id="base-styling">Base Styling</h2>

<p>Now that our markup is good to go, let&rsquo;s add some basic CSS. Our bars container will be visible via a border, and each bar will be a block element with an initial width. Because we&rsquo;re transitioning the width of the bars from initial to 100%, we&rsquo;ll have to apply that transition property as well. Here&rsquo;s some CSS:</p>

<pre><code class="language-css">.c-bars {
  padding: 12px;
  border: solid 4px #25b7a8;
}

.c-bars__bar {
  display: block;
  margin: 0 0 12px 0;
  padding: 2px 0;
  width: 24px;
  color: #fff;
  background-color: #25b7a8;
  text-align: center;
  transition: width 0.5s;
}

.c-bars__bar:last-child {
  margin-bottom: 0;
}
</code></pre>

<p>As mentioned above, the <code>is-expanded</code> class will be toggled on the bars when the button is clicked. This is where we can apply the width change to the bars:</p>

<pre><code class="language-css">.c-bars__bar.is-expanded {
  width: 100%;
}
</code></pre>

<p>At this point, clicking the button should invoke the transition, with all bars transitioning smoothly from their initial width to 100%. Clicking again will revert them to their initial width.</p>

<h2 id="trick-1-applying-sequential-transitions">Trick #1 - Applying Sequential Transitions</h2>

<p>As it stands, all elements transition in and out at the exact same time. In order to invoke the transitions sequentially, we need to use the <code>transition-delay</code> property. We know we have 5 bars, so let&rsquo;s target each of them with the <code>nth-child</code> selector, and delay each bar by <code>0.1s</code>. Here&rsquo;s the additional CSS:</p>

<pre><code class="language-css">.c-bars__bar:nth-child(1) {
  transition-delay: 0s;
}

.c-bars__bar:nth-child(2) {
  transition-delay: 0.1s;
}

.c-bars__bar:nth-child(3) {
  transition-delay: 0.2s;
}

.c-bars__bar:nth-child(4) {
  transition-delay: 0.3s;
}

.c-bars__bar:nth-child(5) {
  transition-delay: 0.4s;
}
</code></pre>

<p>Try toggling again. This time, the first bar starts transitioning immediately, and every bar after that starts transitioning 0.1s later than the previous one. This is a great step! However, when you click the button again and the <code>is-expanded</code> class gets removed, you&rsquo;ll notice that they transition out in the same order that they transitioned in. This isn&rsquo;t quite what we want, so let&rsquo;s take a look at trick #2.</p>

<h2 id="trick-2-last-in-first-out">Trick #2 - Last In, First Out</h2>

<p>In order to achieve the &ldquo;last in, first out&rdquo; transition pattern, we need to assess two states of the demo. The first is the initial state, and the second is the expanded state. We already saw how to transition the bars sequentially from the initial to the expanded state. When they are expanded, we essentially need to revers the <code>transition-delay</code> properties on each bar. Luckily, achieving that is very simple.</p>

<p>When we click the toggle button, the <code>is-expanded</code> class gets immediately added to the elements. That means that while they are transitioning in, they have the <code>is-expanded</code> class. When the bars are expanded and the button gets clicked again, the class gets immediately removed from all of the bars. This presents us with an opportunity to target both transitional phases:</p>

<ol>
<li>Transition delays from initial to expanded should be applied to the <code>is-expanded</code> class.</li>
<li>Transition delays from expanded to initial should be applied to the base class.</li>
</ol>

<p>With that in mind, here&rsquo;s the modified CSS:</p>

<pre><code class="language-css">.c-bars__bar:nth-child(1) {
  transition-delay: 0.4s;
}

.c-bars__bar.is-expanded:nth-child(1) {
  transition-delay: 0s;
}

.c-bars__bar:nth-child(2) {
  transition-delay: 0.3s;
}

.c-bars__bar.is-expanded:nth-child(2) {
  transition-delay: 0.1s;
}

.c-bars__bar:nth-child(3) {
  transition-delay: 0.2s;
}

.c-bars__bar.is-expanded:nth-child(3) {
  transition-delay: 0.2s;
}

.c-bars__bar:nth-child(4) {
  transition-delay: 0.1s;
}

.c-bars__bar.is-expanded:nth-child(4) {
  transition-delay: 0.3s;
}

.c-bars__bar:nth-child(5) {
  transition-delay: 0s;
}

.c-bars__bar.is-expanded:nth-child(5) {
  transition-delay: 0.4s;
}
</code></pre>

<p>Check out the two transitional states now - voila! You&rsquo;ve successfully implemented the last in, first out transition technique, and it looks awesome.</p>

<h2 id="simplification-with-sass">Simplification With Sass</h2>

<p>There is a fundamental mathematical nature involved in creating this transition effect, which means that Sass (or any CSS pre-processor with looping and variables) can be of great assistance. The Sass block that I used to generate the CSS was as simple as this:</p>

<pre><code class="language-scss">$n: 5;
$delay: 0.1;

@for $i from 1 through $n {
  $in: $delay * ($i - 1);
  $out: $delay * ($n - $i);

  .c-bars__bar:nth-child(#{$i}) {
    transition-delay: #{$out}s;
  }

  .c-bars__bar.is-expanded:nth-child(#{$i}) {
    transition-delay: #{$in}s;
  }

}
</code></pre>

<p>Simply changing <code>$n</code> (the number of items) and <code>$delay</code> (the transition delay) will update the entire output for you.</p>

<h2 id="wrap-up">Wrap Up</h2>

<p>And that&rsquo;s a wrap! We just took on an awesome, small challenge in CSS, creating sequentially stacked transitions. Thanks again for reading, and if you have and questions, comments, or feedback, feel free to <a href="http://twitter.com/home?status=@nicksalloum_ I got a question for you!" target="_blank">send me a tweet.</a></p>

<div class="ButtonGroup ButtonGroup--gutter-md ButtonGroup--align-center">
  <a href="https://codepen.io/callmenick/pen/VMNOpq" class="Button Button--display-inlineBlock Button--appearance-secondary Button--size-sm">
    Get Source
  </a>
  <a href="https://codepen.io/callmenick/full/VMNOpq/" class="Button Button--display-inlineBlock Button--appearance-secondary Button--size-sm">
    View Demo
  </a>
</div>

      </div>
    </div>
    <div class="Article-prevNext">
      
        <div class="Article-prevNext-link">
          <strong>Next:</strong>
          <a href="https://callmenick.com/dev/maintainable-responsive-web-design-with-sass/">Maintainable Responsive Web Design with Sass</a>
        </div>
      
      
        <div class="Article-prevNext-link">
          <strong>Previous:</strong>
          <a href="https://callmenick.com/dev/an-introduction-to-gulp/">An Introduction to Gulp</a>
        </div>
      
    </div>
  </section>

      </div>
    </main>
  </div>
  <script src="https://callmenick.com/js/prism.js"></script>
  <script src="https://callmenick.com/js/carbonad.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-34160351-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>
